---
20191011
---

### 이상과 함수적 종속

* 이상 : 데이터의 종복과 종속으로 인해 발생되는 문제점
  * 원인 : 한 릴레이션에 많은 수의 속성으로 인하여 데이터의 중복고 종속 상황으로 인한 문제로 생김
    * 이상의 종류
      * 삭제이상
      * 삽입이상
      * 갱신이상
* 함수적 종속 : 릴레이션에서 속성 A,B가 있을 때, 임의 튜플에서 A의 값이 B의 값을 함수적으로 결정한다. 즉, A의 값을 알면 B의 값을 알 수 있거나 A의 값에 따라 B의 값이 달라진다. B는 A에 함수적으로 종속되었다고 한다. 기호는 A -> B
  * B가 A에 종속되어 A 값을 알면 B 값을 알 수 있을 때, A를 **결정자**, B를 **종속자** 라고 한다.
  * 종류
    * 완전함수종속
    * 부분함수종속
    * 이행적함수종속

### 정규화(NORMALIZATION)

* 정규형
  * 1NF : 모든 도메인이 원자값만으로 구성되도록하는 정규형을 말한다.
    * 갖고있는 문제점 : 부분함수종속
  * 2NF : 릴레이션을 구성하는 모든 속성이 기본키에 완전 함수 종속이 되도록 분해하는 과정
    * 갖고있는 문제점 : 이행적함수종속
  * 3NF : 이행적 함수 종속관계를 분해하여 비이행적 함수 종속이 되도록 하는 과정
  * BCNF(보이스-코드 정규형) : 모든 결정자가 후보 키가 되도록 하는 과정
    * 갖고있는 문제점 : 모든 결정자가 후보키가 아니다.
  * 4NF : 다치 종속 관계가 성립 되는 경우 분해하는 정규형을 말한다.
    * 다치종속 : A ->>B,C (B랑 C는 종속관계가 아니지만, A가 B와 C를 값과 종속된다)
  * 5NF : 조인종속이 후보키를 통해서만 성립이 되도록 하는 정규형을 말한다.
    * 조인 종속 : 자연조인한 결과가 원래의 릴레이션과 같은 결과가 나오는 종속성
* 비정규화

---

### 내장 SQL과 커서

---

### 회복기법과 병행제어

* 회복 : 손상된 데이터베이스를 손상되기 이전의 정상적인 상태로 복구시키는 작업을 말한다.
  * 기법
    * 즉시 갱신 기법 : 트랜잭션이 실행((활동)) 상태에서 변경되는 내용을 바로 DB에 적용하는 기법
    * 지연 갱신 기법 : 부분 완료가 되면 로그의 내용을 토대로 DB에 적용하는 기법
    * 검사 시점 기법 : 로그데이터가 많아 질 때, 검사 시점을 지정하여 검사시점까지 수행 후 완료된 내용을 DB에 적용
    * 그림자 페이징 기법 : 로그를 사용하지 않는다.
      * 그림자 : 복사본
      * DB와 동일한 크기의 단위인 페이지로 나누어 각 페이지마다 복사하여 그림자 페이지를 보관
      * DB의 변경되는 내용은 원본 페이지에 적용하고, 장애가 발생되는 경우 그림자 페이지를 이용해 회복
  * REDO(재수행), UNDO(취소)
    * REDO : 트랜잭션이 수행되어 COMMIT이 되면 변경된 내용을 DB에 반영하게 되는 데, 이때 로그의 내용을 토대로 재수행하며 변경된 내용을 DB에 반영하게 되는 과정
    * UNDO : 트랜잭션이 수행되는 도중 오류가 발생하거나 비정상적으로 종료되는 경우 트랜잭션이 시작된 시점으로 되돌아가는 과정
* 로그 : 회복을 위해 로그를 이용함, 로그란 트랜잭션이 수행되어 변경 되는 데이터베이스의 상황정보를 기록하는 것, 트랜잭션이 수행되기 이전 값과 수행된 이후 값 모두를 기록 된다.
* 장애의 유형
  * 트랜잭션 장애 : 하나의 트랜잭션이 수행되는 과정에서 발생되는 오류
  * 시스템 장애 : 트랜잭션 장애들로 인해 시스템 상의 문제가 발생하여 트랜잭션이 수행되지 못하는 경우를 말한다, ex ) 컴퓨터 다운
  * 미디어 장애 : 하드웨어적으로 하드디스크 등이 손상되는 경우를 말한다.
* 병행 제어
  * 정의
    * 동시에 여러 트랜잭션이 실행되는 경우를 별행실행이라 함
    * 트랜잭션 간의 격리성을 유지하여 트랜잭션 수행에 문제가 발생되지 않도록 제어하는 것을 병행제어
    * 대표적인 병행제어의 방법으로 로킹기법이 있다.
  * 기법
    * 로킹 
      * 하나의 트랜잭션이 사용하는 DB내의 데이터를 다른 트랜잭션이 접근하지 못하게 하는 것을 말함
      * LOCK -> 트랜잭션실행 -> 트랜잭션완료 -> UNLOCK
      * 로킹 단위
        * LOCK을 설정할 데이터의 크기를 나타낸다
        * 테이블, 속성, 튜플 단위로 설정할 수 있다.
    * 2단계 로킹 기법
      * 확장단계 : 트랜잭션 수행에 필요한 데이터들에 대해 LOCK을 설정하는 단계
      * 축소단계 
      * 단점 : 확장과 축소를 모아서 하기 때문에 교착상태가 발생 될 수 있다.
    * 타임 스템프
      * 트랜잭션이 데이터에 접근할 시간을 미리 지정하여 기억시킨 뒤 그 시간의 순서에 따라 순서대로 데이터 접근하여 수행하는 방법
      * 교착상태가 발생되지 않는다.
    * 병행제어를 하지 않았을 때 문제점
    * 갱신 분실
    * 모순성
    * 연쇄 복귀
    * 비완료 의존성

---

### 인덱스

* 

